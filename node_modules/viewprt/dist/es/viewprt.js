function t(t,e){var i=this;this.container=t,this.observers=[],this.lastX=0,this.lastY=0;var o=!1,n=function(){o||(o=!0,requestAnimationFrame((function(){for(var t=i.observers,e=i.getState(),n=t.length;n--;)t[n].check(e);i.lastX=e.positionX,i.lastY=e.positionY,o=!1})))},s=e.handleScrollResize,r=this.handler=s?s(n):n,h=function(){(i.mutationObserver=new MutationObserver(n)).observe(document,{attributes:!0,childList:!0,subtree:!0})},a={capture:!0,passive:!0};addEventListener("scroll",r,a),addEventListener("resize",r,a),"loading"!==document.readyState?h():addEventListener("DOMContentLoaded",h)}function e(t){var e=~~t.offset||0;return this.offsetX=null!=t.offsetX?~~t.offsetX:e,this.offsetY=null!=t.offsetY?~~t.offsetY:e,this.container=t.container||document.body,this.once=!!t.once,this.observerCollection=t.observerCollection||o,this.activate()}function i(t){if(void 0===t&&(t={}),!(this instanceof i))return new i(t);this.viewports=new Map,this.handleScrollResize=t.handleScrollResize}t.prototype={getState:function(){var t,e,i,o,n=this,s=n.container,r=n.lastX,h=n.lastY;return s===document.body?(t=window.innerWidth,e=window.innerHeight,i=window.pageXOffset,o=window.pageYOffset):(t=s.offsetWidth,e=s.offsetHeight,i=s.scrollLeft,o=s.scrollTop),{width:t,height:e,positionX:i,positionY:o,directionX:r<i?"right":r>i?"left":"none",directionY:h<o?"down":h>o?"up":"none"}},destroy:function(){var t=this.handler,e=this.mutationObserver;removeEventListener("scroll",t),removeEventListener("resize",t),e&&e.disconnect()}},e.prototype={activate:function(){var e=this.container,i=this.observerCollection,o=i.viewports,n=o.get(e);n||(n=new t(e,i),o.set(e,n));var s=n.observers;return s.indexOf(this)<0&&s.push(this),n},destroy:function(){var t=this.container,e=this.observerCollection.viewports,i=e.get(t);if(i){var o=i.observers,n=o.indexOf(this);n>-1&&o.splice(n,1),o.length||(i.destroy(),e.delete(t))}}};var o=new i;function n(t){if(void 0===t&&(t={}),!(this instanceof n))return new n(t);this.onTop=t.onTop,this.onBottom=t.onBottom,this.onLeft=t.onLeft,this.onRight=t.onRight,this.onFit=t.onFit,this._wasTop=!0,this._wasBottom=!1,this._wasLeft=!0,this._wasRight=!1,this._wasFit=!1;var i=e.call(this,t);this.check(i.getState())}function s(t,i){if(void 0===i&&(i={}),!(this instanceof s))return new s(t,i);this.element=t,this.onEnter=i.onEnter,this.onExit=i.onExit,this._didEnter=!1;var o=e.call(this,i);r(t)&&this.check(o.getState())}function r(t){return t&&t.parentNode}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.check=function(t){var e=this,i=e.onTop,o=e.onBottom,n=e.onLeft,s=e.onRight,r=e.onFit,h=e._wasTop,a=e._wasBottom,c=e._wasLeft,l=e._wasRight,f=e._wasFit,d=e.container,p=e.offsetX,u=e.offsetY,v=e.once,w=d.scrollHeight,g=d.scrollWidth,b=t.width,m=t.height,y=t.positionX,_=t.positionY,E=_-u<=0,L=w>m&&m+_+u>=w,X=y-p<=0,Y=g>b&&b+y+p>=g,R=w<=m&&g<=b,O=!1;o&&!a&&L?o.call(this,d,t):i&&!h&&E?i.call(this,d,t):s&&!l&&Y?s.call(this,d,t):n&&!c&&X?n.call(this,d,t):r&&!f&&R?r.call(this,d,t):O=!0,v&&!O&&this.destroy(),this._wasTop=E,this._wasBottom=L,this._wasLeft=X,this._wasRight=Y,this._wasFit=R},s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.check=function(t){var e=this,i=e.container,o=e.onEnter,n=e.onExit,s=e.element,h=e.offsetX,a=e.offsetY,c=e.once,l=e._didEnter;if(!r(s))return this.destroy();var f=function(t,e,i,o,n){var s,r,h,a,c=t.getBoundingClientRect();if(!c.width||!c.height)return!1;var l=window.innerWidth,f=window.innerHeight,d=l,p=0,u=0;if(n===document.body)s=f,r=u,h=d,a=p;else{if(!(c.top<f&&c.bottom>u&&c.left<d&&c.right>p))return!1;var v=n.getBoundingClientRect();s=v.bottom,r=v.top,h=v.right,a=v.left}return c.top<s+i&&c.bottom>r-i&&c.left<h+e&&c.right>a-e}(s,h,a,0,i);!l&&f?(this._didEnter=!0,o&&(o.call(this,s,t),c&&this.destroy())):l&&!f&&(this._didEnter=!1,n&&(n.call(this,s,t),c&&this.destroy()))};export{s as ElementObserver,i as ObserverCollection,n as PositionObserver};
//# sourceMappingURL=viewprt.js.map
